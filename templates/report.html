<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PlacementIQ ‚Äì Analysis Report</title>
  <style>
    :root {
      --bg:      #0f1117;
      --surface: #1a1d2e;
      --card:    #1e2235;
      --border:  #2c3050;
      --accent:  #6c63ff;
      --accent2: #00d4aa;
      --text:    #e8eaf6;
      --sub:     #9fa8da;
      --danger:  #ff6b6b;
      --warn:    #ffd54f;
      --success: #69f0ae;
      --orange:  #ffab40;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { background: var(--bg); color: var(--text); font-family: 'Segoe UI', system-ui, sans-serif; }

    /* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
    header {
      background: linear-gradient(135deg, #1a1d2e 0%, #12141f 100%);
      border-bottom: 1px solid var(--border);
      padding: 1.2rem 2rem;
      display: flex; align-items: center; justify-content: space-between;
    }
    header .logo-row { display: flex; align-items: center; gap: .75rem; }
    header .logo {
      width: 38px; height: 38px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      border-radius: 9px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;
    }
    header h1 { font-size: 1.3rem; }
    header a { color: var(--sub); text-decoration: none; font-size: .85rem; }
    header a:hover { color: var(--accent2); }

    /* ‚îÄ‚îÄ Layout ‚îÄ‚îÄ */
    .container { max-width: 1100px; margin: 2rem auto; padding: 0 1.5rem; }
    .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 1.25rem; }
    .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1.25rem; }
    @media (max-width: 760px) { .grid-2, .grid-3 { grid-template-columns: 1fr; } }

    /* ‚îÄ‚îÄ Cards ‚îÄ‚îÄ */
    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 1.4rem 1.6rem;
    }
    .card-title {
      font-size: .7rem; letter-spacing: .08em; text-transform: uppercase;
      color: var(--accent2); font-weight: 600; margin-bottom: .9rem;
    }
    .divider { border: none; border-top: 1px solid var(--border); margin: 1rem 0; }

    /* ‚îÄ‚îÄ Score ring ‚îÄ‚îÄ */
    .score-hero { text-align: center; }
    .ring-wrap { position: relative; width: 130px; height: 130px; margin: 0 auto .75rem; }
    .ring-wrap svg { transform: rotate(-90deg); }
    .ring-bg { fill: none; stroke: var(--border); stroke-width: 10; }
    .ring-fill { fill: none; stroke-width: 10; stroke-linecap: round; transition: stroke-dashoffset .8s; }
    .ring-text {
      position: absolute; inset: 0;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
    }
    .ring-score { font-size: 1.8rem; font-weight: 700; }
    .ring-grade { font-size: .8rem; color: var(--sub); }
    .score-label { font-size: .85rem; color: var(--sub); }

    /* Grade colours */
    .grade-A { color: var(--success); }
    .grade-B { color: var(--accent2); }
    .grade-C { color: var(--warn); }
    .grade-D { color: var(--orange); }
    .grade-F { color: var(--danger); }

    /* Ring colour per grade */
    .ring-A { stroke: var(--success); }
    .ring-B { stroke: var(--accent2); }
    .ring-C { stroke: var(--warn); }
    .ring-D { stroke: var(--orange); }
    .ring-F { stroke: var(--danger); }

    /* ‚îÄ‚îÄ Stats row ‚îÄ‚îÄ */
    .stat-row { display: flex; justify-content: space-between; gap: .5rem; flex-wrap: wrap; margin-top: .5rem; }
    .stat { text-align: center; flex: 1; min-width: 60px; }
    .stat .val { font-size: 1.4rem; font-weight: 700; color: var(--accent2); }
    .stat .lbl { font-size: .7rem; color: var(--sub); }

    /* ‚îÄ‚îÄ Progress bar ‚îÄ‚îÄ */
    .prog-row { display: flex; align-items: center; gap: .7rem; margin-bottom: .55rem; }
    .prog-label { font-size: .82rem; color: var(--text); min-width: 110px; }
    .prog-bar { flex: 1; height: 7px; background: var(--border); border-radius: 4px; overflow: hidden; }
    .prog-fill { height: 100%; border-radius: 4px; transition: width .6s; }
    .prog-val  { font-size: .75rem; color: var(--sub); min-width: 36px; text-align: right; }

    /* ‚îÄ‚îÄ Skill chips ‚îÄ‚îÄ */
    .chip-area { display: flex; flex-wrap: wrap; gap: .45rem; }
    .chip {
      font-size: .75rem; border-radius: 20px; padding: .22rem .65rem;
      border: 1px solid; white-space: nowrap;
    }
    .chip-resume   { background: rgba(108,99,255,.15); border-color: rgba(108,99,255,.35); color: var(--accent); }
    .chip-github   { background: rgba(0,212,170,.12);  border-color: rgba(0,212,170,.3);  color: var(--accent2); }
    .chip-leetcode { background: rgba(255,171,64,.12); border-color: rgba(255,171,64,.35); color: var(--orange); }
    .chip-verified { background: rgba(105,240,174,.1); border-color: rgba(105,240,174,.35); color: var(--success); }
    .chip-gap-crit { background: rgba(255,107,107,.12); border-color: rgba(255,107,107,.35); color: var(--danger); font-weight: 600; }
    .chip-gap-imp  { background: rgba(255,213,79,.1);  border-color: rgba(255,213,79,.35); color: var(--warn); }
    .chip-gap-rec  { background: rgba(159,168,218,.1); border-color: rgba(159,168,218,.3); color: var(--sub); }

    /* ‚îÄ‚îÄ Role cards ‚îÄ‚îÄ */
    .role-card {
      background: #12141f;
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 1rem 1.2rem;
      margin-bottom: .65rem;
      display: flex; align-items: center; gap: 1rem;
      transition: border-color .2s;
    }
    .role-card:hover { border-color: var(--accent); }
    .role-card.primary { border-color: var(--accent2); background: rgba(0,212,170,.06); }
    .role-pct {
      font-size: 1.3rem; font-weight: 700; min-width: 54px; text-align: center;
    }
    .role-info { flex: 1; }
    .role-info strong { font-size: .95rem; }
    .role-info p { font-size: .78rem; color: var(--sub); margin-top: .15rem; }
    .role-bar { height: 5px; border-radius: 3px; margin-top: .4rem; }
    .role-nth { display: flex; flex-wrap: wrap; gap: .3rem; margin-top: .4rem; }
    .nth-tag {
      font-size: .68rem; background: rgba(0,212,170,.1); border: 1px solid rgba(0,212,170,.25);
      color: var(--accent2); border-radius: 12px; padding: .15rem .45rem;
    }

    /* ‚îÄ‚îÄ Roadmap ‚îÄ‚îÄ */
    .phase-block { margin-bottom: 1.5rem; }
    .phase-title {
      font-size: .8rem; font-weight: 600; letter-spacing: .06em; text-transform: uppercase;
      padding: .35rem .8rem; border-radius: 6px; display: inline-block; margin-bottom: .8rem;
    }
    .phase-short  { background: rgba(105,240,174,.12); color: var(--success); }
    .phase-medium { background: rgba(255,213,79,.1);    color: var(--warn); }
    .phase-long   { background: rgba(255,107,107,.12); color: var(--danger); }

    .roadmap-item {
      background: #12141f;
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 1rem 1.2rem;
      margin-bottom: .65rem;
    }
    .roadmap-item .ri-header { display: flex; justify-content: space-between; align-items: center; }
    .roadmap-item .ri-skill { font-size: .95rem; font-weight: 600; }
    .ri-meta { display: flex; gap: .5rem; align-items: center; flex-wrap: wrap; margin-top: .5rem; }
    .ri-meta span { font-size: .72rem; color: var(--sub); }
    .ri-links { display: flex; flex-wrap: wrap; gap: .4rem; margin-top: .6rem; }
    .ri-link {
      font-size: .72rem; text-decoration: none;
      background: rgba(108,99,255,.12); border: 1px solid rgba(108,99,255,.25);
      color: var(--sub); border-radius: 6px; padding: .2rem .5rem;
      transition: color .15s, border-color .15s;
    }
    .ri-link:hover { color: var(--accent); border-color: var(--accent); }
    .ri-projects { margin-top: .5rem; font-size: .77rem; color: var(--sub); }
    .ri-projects em { color: var(--accent2); font-style: normal; }

    /* ‚îÄ‚îÄ Pipeline log ‚îÄ‚îÄ */
    .log-row { display: flex; align-items: center; gap: .6rem; font-size: .8rem; color: var(--sub); margin-bottom: .3rem; }
    .dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }
    .dot-ok  { background: var(--success); }
    .dot-err { background: var(--danger); }
    .dot-skip{ background: var(--border); }

    /* ‚îÄ‚îÄ LeetCode stats ‚îÄ‚îÄ */
    .lc-bars { display: flex; gap: .5rem; margin-top: .6rem; }
    .lc-bar { flex: 1; text-align: center; }
    .lc-bar .count { font-size: 1.3rem; font-weight: 700; }
    .lc-bar .diff { font-size: .7rem; margin-top: .15rem; }
    .easy-c   { color: var(--success); }
    .medium-c { color: var(--warn); }
    .hard-c   { color: var(--danger); }

    /* misc */
    .section-gap { margin-top: 1.5rem; }
    .pill {
      display: inline-block; font-size: .72rem; border-radius: 20px; padding: .2rem .6rem;
      background: rgba(108,99,255,.15); border: 1px solid rgba(108,99,255,.3); color: var(--accent);
    }
    .auth-pct { font-size: 2rem; font-weight: 700; color: var(--accent); text-align: center; margin: .3rem 0; }
    .auth-sub { text-align: center; font-size: .8rem; color: var(--sub); }
  </style>
</head>
<body>

<header>
  <div class="logo-row">
    <div class="logo">üéØ</div>
    <h1>PlacementIQ ‚Äî Analysis Report</h1>
  </div>
  <a href="/">‚Üê New Analysis</a>
</header>

<!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ shorthand variables ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
{% set skills   = result.skills %}
{% set role     = result.role %}
{% set roadmap  = result.roadmap %}
{% set lc       = result.leetcode %}
{% set gh       = result.github %}
{% set readiness= role.readiness %}
{% set grade    = readiness.grade %}
{% set score    = readiness.readiness_score %}
{% set gaps     = role.skill_gaps %}
{% set auth     = skills.authenticity %}

<div class="container">

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ROW 1: Readiness + Authenticity + LeetCode ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="grid-3">

    <!-- Readiness Ring -->
    <div class="card score-hero">
      <p class="card-title">Readiness Score</p>
      {% set circ = 3.14159 * 2 * 54 %}
      {% set offset = circ * (1 - score / 100) %}
      <div class="ring-wrap">
        <svg width="130" height="130" viewBox="0 0 130 130">
          <circle class="ring-bg"   cx="65" cy="65" r="54"/>
          <circle class="ring-fill ring-{{ grade }}"
                  cx="65" cy="65" r="54"
                  stroke-dasharray="{{ circ }}"
                  stroke-dashoffset="{{ offset }}"/>
        </svg>
        <div class="ring-text">
          <span class="ring-score grade-{{ grade }}">{{ score | round(1) }}</span>
          <span class="ring-grade">Grade {{ grade }}</span>
        </div>
      </div>
      <p class="score-label">Role: <strong>{{ readiness.role }}</strong></p>

      <hr class="divider" />
      <div class="prog-row">
        <span class="prog-label">Skill Match</span>
        <div class="prog-bar"><div class="prog-fill" style="width:{{ readiness.components.skill_match / 50 * 100 }}%; background:var(--accent)"></div></div>
        <span class="prog-val">{{ readiness.components.skill_match }}</span>
      </div>
      <div class="prog-row">
        <span class="prog-label">Authenticity</span>
        <div class="prog-bar"><div class="prog-fill" style="width:{{ readiness.components.authenticity / 20 * 100 }}%; background:var(--accent2)"></div></div>
        <span class="prog-val">{{ readiness.components.authenticity }}</span>
      </div>
      <div class="prog-row">
        <span class="prog-label">DSA / LeetCode</span>
        <div class="prog-bar"><div class="prog-fill" style="width:{{ readiness.components.dsa_leetcode / 20 * 100 }}%; background:var(--warn)"></div></div>
        <span class="prog-val">{{ readiness.components.dsa_leetcode }}</span>
      </div>
      <div class="prog-row">
        <span class="prog-label">CGPA</span>
        <div class="prog-bar"><div class="prog-fill" style="width:{{ readiness.components.cgpa / 10 * 100 }}%; background:var(--orange)"></div></div>
        <span class="prog-val">{{ readiness.components.cgpa }}</span>
      </div>
    </div>

    <!-- Authenticity -->
    <div class="card">
      <p class="card-title">Skill Authenticity</p>
      <div class="auth-pct">{{ (auth.aggregate * 100) | round(1) }}%</div>
      <div class="auth-sub">Aggregate verification score</div>
      <hr class="divider" />
      <div class="stat-row">
        <div class="stat">
          <div class="val">{{ auth.breakdown.total }}</div>
          <div class="lbl">Total Skills</div>
        </div>
        <div class="stat">
          <div class="val" style="color:var(--accent)">{{ skills.resume_skills | length }}</div>
          <div class="lbl">Resume</div>
        </div>
        <div class="stat">
          <div class="val" style="color:var(--accent2)">{{ skills.github_skills | length }}</div>
          <div class="lbl">GitHub</div>
        </div>
        <div class="stat">
          <div class="val" style="color:var(--orange)">{{ skills.leetcode_skills | length }}</div>
          <div class="lbl">LeetCode</div>
        </div>
      </div>
      <hr class="divider" />
      <div class="prog-row">
        <span class="prog-label">Verified by GitHub</span>
        <div class="prog-bar"><div class="prog-fill" style="width:{{ auth.breakdown.verified_github / [auth.breakdown.total,1]|max * 100 }}%; background:var(--accent2)"></div></div>
        <span class="prog-val">{{ auth.breakdown.verified_github }}</span>
      </div>
      <div class="prog-row">
        <span class="prog-label">Verified LeetCode</span>
        <div class="prog-bar"><div class="prog-fill" style="width:{{ auth.breakdown.verified_leetcode / [auth.breakdown.total,1]|max * 100 }}%; background:var(--orange)"></div></div>
        <span class="prog-val">{{ auth.breakdown.verified_leetcode }}</span>
      </div>
      <div class="prog-row">
        <span class="prog-label">Coverage</span>
        <div class="prog-bar"><div class="prog-fill" style="width:{{ (auth.breakdown.verification_coverage * 100) }}%; background:var(--success)"></div></div>
        <span class="prog-val">{{ (auth.breakdown.verification_coverage * 100) | round(0) }}%</span>
      </div>
    </div>

    <!-- LeetCode -->
    <div class="card">
      <p class="card-title">LeetCode Activity</p>
      {% if lc and lc.success %}
        <div class="lc-bars">
          <div class="lc-bar easy-c">
            <div class="count">{{ lc.solved_easy }}</div>
            <div class="diff">Easy</div>
          </div>
          <div class="lc-bar medium-c">
            <div class="count">{{ lc.solved_medium }}</div>
            <div class="diff">Medium</div>
          </div>
          <div class="lc-bar hard-c">
            <div class="count">{{ lc.solved_hard }}</div>
            <div class="diff">Hard</div>
          </div>
        </div>
        <hr class="divider" />
        <div style="display:flex;justify-content:space-between;font-size:.82rem">
          <span style="color:var(--sub)">Total Solved</span>
          <strong>{{ lc.solved_total }}</strong>
        </div>
        <div style="display:flex;justify-content:space-between;font-size:.82rem;margin-top:.4rem">
          <span style="color:var(--sub)">Proficiency</span>
          <strong style="text-transform:capitalize">{{ lc.proficiency }}</strong>
        </div>
        <div style="display:flex;justify-content:space-between;font-size:.82rem;margin-top:.4rem">
          <span style="color:var(--sub)">Activity Score</span>
          <strong>{{ (lc.activity_score * 100) | round(1) }}%</strong>
        </div>
        {% if lc.dsa_skills %}
        <hr class="divider" />
        <p style="font-size:.75rem;color:var(--sub);margin-bottom:.5rem">Inferred DSA Topics</p>
        <div class="chip-area">
          {% for s in lc.dsa_skills %}
            <span class="chip chip-leetcode">{{ s }}</span>
          {% endfor %}
        </div>
        {% endif %}
      {% else %}
        <p style="color:var(--sub);font-size:.85rem;margin-top:.5rem">
          {% if lc.error %}{{ lc.error }}{% else %}No LeetCode username provided.{% endif %}
        </p>
      {% endif %}

      {% if gh and gh.success %}
      <hr class="divider" />
      <p class="card-title" style="margin-bottom:.5rem">GitHub Summary</p>
      <div style="display:flex;justify-content:space-between;font-size:.82rem">
        <span style="color:var(--sub)">Repos</span><strong>{{ gh.repo_count }}</strong>
      </div>
      <div style="display:flex;justify-content:space-between;font-size:.82rem;margin-top:.4rem">
        <span style="color:var(--sub)">Stars</span><strong>{{ gh.total_stars }}</strong>
      </div>
      {% if gh.top_languages %}
      <div style="margin-top:.6rem">
        <p style="font-size:.72rem;color:var(--sub);margin-bottom:.35rem">Top Languages</p>
        <div class="chip-area">
          {% for l in gh.top_languages %}
            <span class="chip chip-github">{{ l }}</span>
          {% endfor %}
        </div>
      </div>
      {% endif %}
      {% endif %}
    </div>
  </div><!-- /grid-3 -->

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ROW 2: Role Recommendations ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="section-gap">
    <div class="card">
      <p class="card-title">üèÜ Role Recommendations</p>
      {% for rec in role.recommended_roles %}
        <div class="role-card {% if rec.role == role.primary_role %}primary{% endif %}">
          <div class="role-pct
            {% if rec.match_pct >= 70 %}grade-A
            {% elif rec.match_pct >= 55 %}grade-B
            {% elif rec.match_pct >= 40 %}grade-C
            {% elif rec.match_pct >= 25 %}grade-D
            {% else %}grade-F{% endif %}">
            {{ rec.match_pct | round(0) | int }}%
          </div>
          <div class="role-info">
            <strong>{{ rec.role }}</strong>
            {% if rec.role == role.primary_role %}<span class="pill" style="margin-left:.4rem">Primary</span>{% endif %}
            <p>{{ rec.description[:90] }}{% if rec.description|length > 90 %}‚Ä¶{% endif %}</p>
            <div class="role-bar" style="width:{{ rec.match_pct }}%; background:
              {% if rec.match_pct >= 70 %}var(--success)
              {% elif rec.match_pct >= 55 %}var(--accent2)
              {% elif rec.match_pct >= 40 %}var(--warn)
              {% else %}var(--danger){% endif %}">
            </div>
            <div style="font-size:.72rem;color:var(--sub);margin-top:.3rem">
              {{ rec.matched_count }} / {{ rec.total_required }} required skills matched
            </div>
            {% if rec.nice_to_have_present %}
            <div class="role-nth">
              {% for s in rec.nice_to_have_present[:6] %}
                <span class="nth-tag">+{{ s }}</span>
              {% endfor %}
            </div>
            {% endif %}
          </div>
        </div>
      {% else %}
        <p style="color:var(--sub)">No roles matched.</p>
      {% endfor %}
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ROW 3: Skills + Gaps ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="section-gap grid-2">

    <!-- Candidate Skills -->
    <div class="card">
      <p class="card-title">üõ†Ô∏è Your Skills ({{ skills.candidate_skills | length }})</p>
      <div class="chip-area">
        {% for skill in skills.candidate_skills %}
          {% set srcs = skills.skill_sources.get(skill, []) %}
          {% if 'github' in srcs and 'resume' in srcs %}
            <span class="chip chip-verified" title="Resume + GitHub verified">{{ skill }}</span>
          {% elif 'leetcode' in srcs and 'resume' in srcs %}
            <span class="chip chip-verified" title="Resume + LeetCode verified">{{ skill }}</span>
          {% elif 'github' in srcs %}
            <span class="chip chip-github" title="GitHub only">{{ skill }}</span>
          {% elif 'leetcode' in srcs %}
            <span class="chip chip-leetcode" title="LeetCode only">{{ skill }}</span>
          {% else %}
            <span class="chip chip-resume" title="Resume only">{{ skill }}</span>
          {% endif %}
        {% else %}
          <p style="color:var(--sub);font-size:.85rem">No skills extracted.</p>
        {% endfor %}
      </div>
      <hr class="divider" />
      <div style="display:flex;gap:.5rem;font-size:.72rem;color:var(--sub)">
        <span class="chip chip-verified">‚úì Verified</span>
        <span class="chip chip-resume">Resume only</span>
        <span class="chip chip-github">GitHub</span>
        <span class="chip chip-leetcode">LeetCode</span>
      </div>
    </div>

    <!-- Skill Gaps -->
    <div class="card">
      <p class="card-title">üîç Skill Gaps for {{ gaps.role }}</p>
      {% if gaps.missing_skills %}
        <p style="font-size:.8rem;color:var(--sub);margin-bottom:.8rem">
          {{ gaps.gap_count }} gaps ¬∑ {{ gaps.coverage_pct }}% role coverage
        </p>
        <div class="chip-area">
          {% for item in gaps.missing_skills %}
            {% if item.label == 'Critical' %}
              <span class="chip chip-gap-crit" title="Critical">{{ item.skill }}</span>
            {% elif item.label == 'Important' %}
              <span class="chip chip-gap-imp" title="Important">{{ item.skill }}</span>
            {% else %}
              <span class="chip chip-gap-rec" title="Recommended">{{ item.skill }}</span>
            {% endif %}
          {% endfor %}
        </div>
        <hr class="divider" />
        <div style="display:flex;gap:.5rem;font-size:.72rem;color:var(--sub)">
          <span class="chip chip-gap-crit">Critical</span>
          <span class="chip chip-gap-imp">Important</span>
          <span class="chip chip-gap-rec">Recommended</span>
        </div>
        {% if gaps.nice_to_have_gaps %}
        <hr class="divider" />
        <p style="font-size:.75rem;color:var(--sub);margin-bottom:.5rem">Nice to have</p>
        <div class="chip-area">
          {% for s in gaps.nice_to_have_gaps %}
            <span class="chip chip-gap-rec">{{ s }}</span>
          {% endfor %}
        </div>
        {% endif %}
      {% else %}
        <p style="color:var(--success);font-size:.9rem;margin-top:.5rem">
          üéâ No significant skill gaps detected for this role!
        </p>
      {% endif %}
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ROW 4: Roadmap ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="section-gap">
    <div class="card">
      <p class="card-title">üó∫Ô∏è Personalised Learning Roadmap</p>
      <p style="color:var(--sub);font-size:.85rem;margin-bottom:1rem">{{ roadmap.summary }}</p>

      {% for phase_key, phase_label_css in [('short-term','short'),('medium-term','medium'),('long-term','long')] %}
        {% set items = roadmap.phases[phase_key] %}
        {% if items %}
        <div class="phase-block">
          <span class="phase-title phase-{{ phase_label_css }}">
            {% if phase_key == 'short-term' %}‚ö° Short-term
            {% elif phase_key == 'medium-term' %}üìÖ Medium-term
            {% else %}üèóÔ∏è Long-term{% endif %}
          </span>
          {% for item in items %}
          <div class="roadmap-item">
            <div class="ri-header">
              <span class="ri-skill">{{ item.skill }}</span>
              <span class="pill">~{{ item.hours }}h</span>
            </div>
            <div class="ri-meta">
              <span>Priority: <strong>{{ item.priority }}</strong></span>
              <span>¬∑</span>
              <span>{{ item.phase_label }}</span>
            </div>
            {% if item.resources %}
            <div class="ri-links">
              {% for r in item.resources %}
                <a class="ri-link" href="{{ r.url }}" target="_blank" rel="noopener">
                  {% if r.type == 'course' %}üìö
                  {% elif r.type == 'docs' %}üìÑ
                  {% elif r.type == 'practice' %}üéÆ
                  {% else %}üîó{% endif %}
                  {{ r.name }}
                </a>
              {% endfor %}
            </div>
            {% endif %}
            {% if item.projects %}
            <div class="ri-projects">
              üí° Projects:
              {% for p in item.projects %}
                <em>{{ p }}</em>{% if not loop.last %} ¬∑ {% endif %}
              {% endfor %}
            </div>
            {% endif %}
          </div>
          {% endfor %}
        </div>
        {% endif %}
      {% endfor %}

      {% if roadmap.nice_to_have %}
      <hr class="divider" />
      <p style="font-size:.75rem;color:var(--sub);margin-bottom:.6rem">‚≠ê Nice-to-Have Learning</p>
      <div class="chip-area">
        {% for item in roadmap.nice_to_have %}
          <span class="chip" style="background:rgba(159,168,218,.08);border-color:rgba(159,168,218,.25);color:var(--sub)">
            {{ item.skill }} ~{{ item.hours }}h
          </span>
        {% endfor %}
      </div>
      {% endif %}
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ROW 5: Pipeline log ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="section-gap">
    <div class="card">
      <p class="card-title">‚öôÔ∏è Pipeline Log</p>
      {% for log in result.pipeline_log %}
        <div class="log-row">
          <div class="dot {% if log.success %}dot-ok{% elif log.detail == 'No username provided' %}dot-skip{% else %}dot-err{% endif %}"></div>
          <strong>{{ log.step }}</strong>
          <span>‚Äî</span>
          <span>
            {% if log.success %}OK
            {% elif log.detail %}{{ log.detail }}
            {% else %}Skipped{% endif %}
          </span>
        </div>
      {% endfor %}
    </div>
  </div>

</div><!-- /container -->

<footer style="text-align:center;color:var(--sub);font-size:.75rem;padding:2rem 0">
  PlacementIQ ¬∑ Report generated ¬∑ <a href="/" style="color:var(--accent);text-decoration:none">Run another analysis ‚Üí</a>
</footer>

</body>
</html>
